---
title: 阿里巴巴JAVA开发手册-MySQL
date: 2018-08-17 20:59:51
author: fuf
notebook: blog
evernote-version: 0
source: 原创/转载
thumbnail: 
tags:
    - JAVA,Alibaba
blogexcerpt:
---


# （五） MySQL数据库

# 建表规约
- 1.表达是与否概念的字段，必须使用 is_xxx 的方式命名，数据类型是 unsigned t inyint（1 表示是，0 表示否）。

    > 说明：任何字段如果为非负数，必须是 unsigned。

    > 注意：POJO 类中的任何布尔类型的变量，都不要加 is 前缀，所以，需要在设置从 is_xxx到 Xxx 的映射关系。数据库表示是与否的值，使用 tinyint 类型，坚持 is_xxx 的命名方式是为了明确其取值含义与取值范围。

    - 正例：表达逻辑删除的字段名 is_deleted，1 表示删除，0 表示未删除。
- 2.表名、字段名必须使用小写字母或数字，禁止出现数字开头，禁止两个下划线中间只出现数字。数据库字段名的修改代价很大，因为无法进行预发布，所以字段名称需要慎重考虑。

    - 说明：MySQL 在 Windows 下不区分大小写，但在 Linux 下默认是区分大小写。因此，数据库名、表名、字段名，都不允许出现任何大写字母，避免节外生枝。


- 5.主键索引名为 pk_字段名；唯一索引名为 uk_字段名；普通索引名则为 idx_字段名。

说明：pk_ 即 primary key；uk_ 即 unique key；idx_ 即 index 的简称。


- 6.小数类型为 decimal，禁止使用 float 和 double。

   - 说明：在存储的时候，float 和 double 都存在精度损失的问题，很可能在比较值的时候，得到不正确的结果。如果存储的数据范围超过 decimal 的范围，建议将数据拆成整数和小数并分开存储。

- 7.如果存储的字符串长度几乎相等，使用 char 定长字符串类型。

- 8.varchar 是可变长字符串，不预先分配存储空间，长度不要超过 5000，如果存储长度大于此值，定义字段类型为 text，独立出来一张表，用主键来对应，避免影响其它字段索引效率。

- 9.表必备三字段：id, create_time, update_time。

   - 说明：其中 id 必为主键，类型为 bigint unsigned、单表时自增、步长为 1。create_time, update_time的类型均为 datetime 类型。

# 索引规约

- 1.业务上具有唯一特性的字段，即使是多个字段的组合，也必须建成唯一索引。
- 2.超过三个表禁止 join。需要 join 的字段，数据类型必须绝对一致；多表关联查询时，保证被关联的字段需要有索引。
- 3.在 varchar 字段上建立索引时，必须指定索引长度，没必要对全字段建立索引，根据实际文本区分度决定索引长度即可。

# SQL语句

# ORM映射
- 1.在表查询中，一律不要使用 * 作为查询的字段列表，需要哪些字段必须明确写明。

   > 说明：
   - 1）增加查询分析器解析成本。
​   

   - 2）增减字段容易与 resultMap 配置不一致。
​   


   - 3）无用字段增加网络消耗，尤其是 text 类型的字段。

- 2.POJO 类的布尔属性不能加 is，而数据库字段必须加 is_，要求在 resultMap 中进行字段与属性之间的映射。

- 4.sql.xml 配置参数使用：#{}，#param# 不要使用${} 此种方式容易出现 SQL 注入。